<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 MLB Top 50 Players by bWAR</title>
    <meta name="description" content="Interactive visualization of 2025 MLB's top 50 players by WAR, showing offensive vs defensive contributions">
    <meta property="og:title" content="2025 MLB Top 50 Players by bWAR">
    <meta property="og:description" content="Interactive chart: Offensive WAR vs Defensive WAR">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
            background: linear-gradient(to bottom right, #f8fafc, #dbeafe);
            min-height: 100vh;
            padding: 1rem;
        }
        #root { max-width: 1400px; margin: 0 auto; }
        .chart-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 1.5rem;
        }
        h1 {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        .subtitle {
            font-size: 0.875rem;
            font-weight: 600;
            color: #4b5563;
            margin-bottom: 1.5rem;
        }
        .chart-wrapper { 
            position: relative; 
            overflow-x: auto;
            overflow-y: visible;
        }
        .chart-scroll {
            min-width: 900px;
        }
        svg { display: block; margin: 0 auto; }
        .tooltip {
            position: absolute;
            background: #1f2937;
            color: white;
            padding: 0.75rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            font-size: 0.875rem;
            pointer-events: none;
            z-index: 10;
        }
        .tooltip-name { font-weight: bold; margin-bottom: 0.25rem; }
        .footnote {
            position: absolute;
            bottom: 10px;
            right: 40px;
            font-size: 11px;
            color: #6b7280;
        }
        .source {
            position: absolute;
            bottom: 10px;
            left: 60px;
            font-size: 11px;
            color: #6b7280;
        }
        .cursor-pointer { cursor: pointer; }
        .mobile-hint {
            display: none;
            text-align: center;
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.5rem;
        }
        @media (max-width: 1024px) {
            body { padding: 0.5rem; }
            .chart-container { 
                padding: 1rem;
                border-radius: 8px;
            }
            h1 { font-size: 1.25rem; }
            .subtitle { 
                font-size: 0.8rem;
                margin-bottom: 1rem;
            }
            .mobile-hint {
                display: block;
            }
        }
        @media (max-width: 640px) {
            body { padding: 0.25rem; }
            .chart-container { padding: 0.75rem; }
            h1 { font-size: 1.1rem; }
            .subtitle { font-size: 0.75rem; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function WARChart() {
            const [hoveredPlayer, setHoveredPlayer] = useState(null);
            const [mousePos, setMousePos] = useState({ x: 0, y: 0 });

            const data = [
                {Player: "Ernie Clement", WAR: 4.3, oWAR: 1.9, dWAR: 2.9, "Data Label?": "Yes"},
                {Player: "Ceddanne Rafaela", WAR: 4.8, oWAR: 2.4, dWAR: 2.9, "Data Label?": "Yes"},
                {Player: "Harrison Bader", WAR: 4.2, oWAR: 2.6, dWAR: 1.6, "Data Label?": "Yes"},
                {Player: "Andy Pages", WAR: 3.8, oWAR: 3, dWAR: 0.9},
                {Player: "Ian Happ", WAR: 4, oWAR: 3.1, dWAR: 0.4},
                {Player: "Mookie Betts", WAR: 4.8, oWAR: 3.2, dWAR: 2.6, "Data Label?": "Yes"},
                {Player: "Tyler Soderstrom", WAR: 4.4, oWAR: 3.3, dWAR: 0.5},
                {Player: "Matt Chapman", WAR: 4.1, oWAR: 3.6, dWAR: 0.9},
                {Player: "Vladimir Guerrero Jr.", WAR: 4.5, oWAR: 3.7, dWAR: -0.1},
                {Player: "Jarren Duran", WAR: 4.6, oWAR: 3.7, dWAR: 0.5},
                {Player: "Zach Neto", WAR: 5.1, oWAR: 3.7, dWAR: 2.2, "Data Label?": "Yes"},
                {Player: "Manny Machado", WAR: 4.1, oWAR: 3.8, dWAR: 0.6},
                {Player: "Cody Bellinger", WAR: 5, oWAR: 3.8, dWAR: 0.8},
                {Player: "Dansby Swanson", WAR: 4.5, oWAR: 3.8, dWAR: 1.7, "Data Label?": "Yes"},
                {Player: "Rafael Devers", WAR: 4, oWAR: 3.9, dWAR: -1.2, "Data Label?": "Yes"},
                {Player: "William Contreras", WAR: 3.9, oWAR: 3.9, dWAR: 0.8},
                {Player: "Wyatt Langford", WAR: 5.6, oWAR: 3.9, dWAR: 1.5},
                {Player: "Randy Arozarena", WAR: 3.9, oWAR: 4.1, dWAR: -0.7},
                {Player: "Shea Langeliers", WAR: 3.9, oWAR: 4.2, dWAR: 0.3},
                {Player: "Ketel Marte", WAR: 4.4, oWAR: 4.3, dWAR: 0.3},
                {Player: "Jazz Chisholm Jr.", WAR: 4.2, oWAR: 4.3, dWAR: 0.3},
                {Player: "Matt Olson", WAR: 6.1, oWAR: 4.3, dWAR: 1.1},
                {Player: "Michael Busch", WAR: 4.5, oWAR: 4.4, dWAR: -0.6},
                {Player: "Fernando Tatis Jr.", WAR: 5.9, oWAR: 4.4, dWAR: 1.1},
                {Player: "Pete Crow-Armstrong", WAR: 6, oWAR: 4.4, dWAR: 2, "Data Label?": "Yes"},
                {Player: "Corey Seager", WAR: 6.1, oWAR: 4.4, dWAR: 2.3, "Data Label?": "Yes"},
                {Player: "Trevor Story", WAR: 3.8, oWAR: 4.5, dWAR: 0.3},
                {Player: "Nico Hoerner", WAR: 6.1, oWAR: 4.5, dWAR: 2.2, "Data Label?": "Yes"},
                {Player: "Kyle Tucker", WAR: 4.5, oWAR: 4.7, dWAR: -0.8, "Data Label?": "Yes"},
                {Player: "Will Smith", WAR: 4.5, oWAR: 4.7, dWAR: 0.5},
                {Player: "Maikel Garcia", WAR: 5.8, oWAR: 4.7, dWAR: 1.6},
                {Player: "Kyle Schwarber", WAR: 4.7, oWAR: 4.9, dWAR: -1.9, "Data Label?": "Yes"},
                {Player: "Junior Caminero", WAR: 4.5, oWAR: 4.9, dWAR: 0},
                {Player: "Corbin Carroll", WAR: 5.8, oWAR: 5, dWAR: 0.4},
                {Player: "Brice Turang", WAR: 5.5, oWAR: 5, dWAR: 1},
                {Player: "Nick Kurtz", WAR: 5.4, oWAR: 5.1, dWAR: -0.4},
                {Player: "Jeremy Peña", WAR: 5.6, oWAR: 5.1, dWAR: 1.3},
                {Player: "Trea Turner", WAR: 5.5, oWAR: 5.3, dWAR: 1.1},
                {Player: "Byron Buxton", WAR: 4.9, oWAR: 5.4, dWAR: -0.2},
                {Player: "George Springer", WAR: 4.8, oWAR: 5.5, dWAR: -1.6, "Data Label?": "Yes"},
                {Player: "Gunnar Henderson", WAR: 5.4, oWAR: 5.6, dWAR: 0.7},
                {Player: "José Ramírez", WAR: 5.8, oWAR: 5.7, dWAR: 0.2, "Data Label?": "Yes"},
                {Player: "Julio Rodríguez", WAR: 6.8, oWAR: 5.8, dWAR: 1.5, "Data Label?": "Yes"},
                {Player: "Francisco Lindor", WAR: 5.8, oWAR: 6, dWAR: 0.8, "Data Label?": "Yes"},
                {Player: "Shohei Ohtani", WAR: 6.6, oWAR: 6.6, dWAR: -1.7, "Data Label?": "Yes"},
                {Player: "Bobby Witt Jr.", WAR: 7.1, oWAR: 6.7, dWAR: 1.3, "Data Label?": "Yes"},
                {Player: "Geraldo Perdomo", WAR: 7, oWAR: 6.8, dWAR: 1.3, "Data Label?": "Yes"},
                {Player: "Juan Soto", WAR: 6.2, oWAR: 7, dWAR: -1.3, "Data Label?": "Yes"},
                {Player: "Cal Raleigh", WAR: 7.3, oWAR: 7.7, dWAR: 0.1, "Data Label?": "Yes"},
                {Player: "Aaron Judge", WAR: 9.7, oWAR: 9.4, dWAR: -0.5, "Data Label?": "Yes"}
            ];

            const width = 900;
            const height = 600;
            const margin = { top: 40, right: 40, bottom: 60, left: 60 };
            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;

            const oWARValues = data.map(d => d.oWAR);
            const dWARValues = data.map(d => d.dWAR);
            const minOWAR = Math.min(...oWARValues);
            const maxOWAR = Math.max(...oWARValues);
            const minDWAR = Math.min(...dWARValues);
            const maxDWAR = Math.max(...dWARValues);

            const oWARRange = maxOWAR - minOWAR;
            const dWARRange = maxDWAR - minDWAR;
            const xMin = minOWAR - oWARRange * 0.1;
            const xMax = maxOWAR + oWARRange * 0.1;
            const yMin = minDWAR - dWARRange * 0.1;
            const yMax = maxDWAR + dWARRange * 0.1;

            const scaleX = (val) => ((val - xMin) / (xMax - xMin)) * chartWidth;
            const scaleY = (val) => chartHeight - ((val - yMin) / (yMax - yMin)) * chartHeight;
            
            const minWAR = Math.min(...data.map(d => d.WAR));
            const maxWAR = Math.max(...data.map(d => d.WAR));
            const scaleRadius = (war) => 5 + ((war - minWAR) / (maxWAR - minWAR)) * 20;

            const xTicks = [];
            const yTicks = [];
            for (let i = 0; i <= 10; i++) {
                xTicks.push(xMin + (xMax - xMin) * (i / 10));
                yTicks.push(yMin + (yMax - yMin) * (i / 10));
            }

            const handleMouseMove = (e, player) => {
                const svg = e.currentTarget.closest('svg');
                const rect = svg.getBoundingClientRect();
                setMousePos({ x: e.clientX - rect.left, y: e.clientY - rect.top });
                setHoveredPlayer(player);
            };

            const oWARMedian = [...oWARValues].sort((a, b) => a - b)[Math.floor(oWARValues.length / 2)];

            const getLabelPosition = (player) => {
                const positions = {
                    "Aaron Judge": { offsetX: 8, offsetY: -5, anchor: "start" },
                    "Cal Raleigh": { offsetX: 0, offsetY: -15, anchor: "middle", fromTop: true },
                    "Juan Soto": { offsetX: 8, offsetY: -5, anchor: "start" },
                    "Shohei Ohtani": { offsetX: 8, offsetY: 8, anchor: "start" },
                    "Bobby Witt Jr.": { offsetX: -8, offsetY: 8, anchor: "end", fromLeft: true },
                    "Geraldo Perdomo": { offsetX: 8, offsetY: 8, anchor: "start" },
                    "Julio Rodríguez": { offsetX: 8, offsetY: -12, anchor: "start" },
                    "Kyle Schwarber": { offsetX: 8, offsetY: 4, anchor: "start" },
                    "Rafael Devers": { offsetX: 8, offsetY: 2, anchor: "start" },
                    "Corey Seager": { offsetX: 8, offsetY: -10, anchor: "start" },
                    "Pete Crow-Armstrong": { offsetX: 8, offsetY: 4, anchor: "start" },
                    "Nico Hoerner": { offsetX: 8, offsetY: 4, anchor: "start" },
                    "Zach Neto": { offsetX: -8, offsetY: 8, anchor: "end", fromLeft: true },
                    "Mookie Betts": { offsetX: 8, offsetY: 8, anchor: "start" },
                    "Dansby Swanson": { offsetX: -8, offsetY: 8, anchor: "end", fromLeft: true },
                    "Ernie Clement": { offsetX: -10, offsetY: 18, anchor: "middle", fromBottom: true },
                    "Ceddanne Rafaela": { offsetX: 10, offsetY: 18, anchor: "middle", fromBottom: true },
                    "José Ramírez": { offsetX: 8, offsetY: 8, anchor: "start" },
                    "Francisco Lindor": { offsetX: 8, offsetY: 8, anchor: "start" },
                    "Kyle Tucker": { offsetX: 8, offsetY: 8, anchor: "start" },
                    "George Springer": { offsetX: 8, offsetY: -4, anchor: "start" },
                    "Harrison Bader": { offsetX: 0, offsetY: -12, anchor: "middle", fromTop: true }
                };
                return positions[player.Player] || { offsetX: 8, offsetY: 4, anchor: "start" };
            };

            const singleLineNames = ["Kyle Schwarber", "Corey Seager", "Nico Hoerner", "Pete Crow-Armstrong", "José Ramírez", "Francisco Lindor", "Kyle Tucker", "Harrison Bader"];

            return (
                <div className="chart-container">
                    <h1>2025 Season - Top 50 Players by bWAR</h1>
                    <p className="subtitle">Offensive WAR vs Defensive WAR (bubble size = total WAR)</p>
                    
                    <div className="chart-wrapper">
                        <div className="chart-scroll">
                            <svg width={width} height={height}>
                            <g transform={`translate(${margin.left},${margin.top})`}>
                                {xTicks.map((tick, i) => (
                                    <line key={`x-grid-${i}`} x1={scaleX(tick)} y1={0} x2={scaleX(tick)} y2={chartHeight} stroke="#e5e7eb" strokeWidth="1" />
                                ))}
                                {yTicks.map((tick, i) => (
                                    <line key={`y-grid-${i}`} x1={0} y1={scaleY(tick)} x2={chartWidth} y2={scaleY(tick)} stroke="#e5e7eb" strokeWidth="1" />
                                ))}

                                <rect x={0} y={scaleY(0)} width={chartWidth} height={chartHeight - scaleY(0)} fill="#fee2e2" opacity={0.3} />
                                <line x1={0} y1={scaleY(0)} x2={chartWidth} y2={scaleY(0)} stroke="#9ca3af" strokeWidth="2" strokeDasharray="5,5" />
                                
                                <text x={scaleX(oWARMedian) - chartWidth * 0.2} y={25} textAnchor="middle" style={{fontSize: '14px', fontWeight: '600', fill: '#6b7280'}}>
                                    Defensive Wizards
                                </text>
                                <text x={scaleX(oWARMedian) + chartWidth * 0.25} y={scaleY(yMax) + 85} textAnchor="middle" style={{fontSize: '14px', fontWeight: '600', fill: '#6b7280'}}>
                                    All-Around Players
                                </text>
                                <text x={scaleX(8.5)} y={scaleY(0) - 30} textAnchor="middle" style={{fontSize: '14px', fontWeight: '600', fill: '#6b7280'}}>
                                    Elite Hitters
                                </text>
                                <text x={scaleX(oWARMedian) + chartWidth * 0.2} y={chartHeight - 20} textAnchor="middle" style={{fontSize: '14px', fontWeight: '600', fill: '#6b7280'}}>
                                    At Least They Can Hit
                                </text>

                                <line x1={0} y1={chartHeight} x2={chartWidth} y2={chartHeight} stroke="#374151" strokeWidth="2" />
                                {xTicks.filter((_, i) => i % 2 === 0).map((tick, i) => (
                                    <g key={`x-tick-${i}`}>
                                        <line x1={scaleX(tick)} y1={chartHeight} x2={scaleX(tick)} y2={chartHeight + 6} stroke="#374151" strokeWidth="2" />
                                        <text x={scaleX(tick)} y={chartHeight + 20} textAnchor="middle" style={{fontSize: '12px', fill: '#4b5563'}}>{tick.toFixed(1)}</text>
                                    </g>
                                ))}
                                <text x={chartWidth / 2} y={chartHeight + 45} textAnchor="middle" style={{fontSize: '14px', fontWeight: '600', fill: '#1f2937'}}>
                                    Offensive WAR (oWAR)
                                </text>

                                <line x1={0} y1={0} x2={0} y2={chartHeight} stroke="#374151" strokeWidth="2" />
                                {yTicks.filter((_, i) => i % 2 === 0).map((tick, i) => (
                                    <g key={`y-tick-${i}`}>
                                        <line x1={0} y1={scaleY(tick)} x2={-6} y2={scaleY(tick)} stroke="#374151" strokeWidth="2" />
                                        <text x={-10} y={scaleY(tick)} textAnchor="end" dominantBaseline="middle" style={{fontSize: '12px', fill: '#4b5563'}}>{tick.toFixed(1)}</text>
                                    </g>
                                ))}
                                <text x={-35} y={chartHeight / 2} textAnchor="middle" transform={`rotate(-90, -35, ${chartHeight / 2})`} style={{fontSize: '14px', fontWeight: '600', fill: '#1f2937'}}>
                                    Defensive WAR (dWAR)
                                </text>

                                {data.map((player, i) => {
                                    const x = scaleX(player.oWAR);
                                    const y = scaleY(player.dWAR);
                                    const r = scaleRadius(player.WAR);
                                    const isHovered = hoveredPlayer?.Player === player.Player;
                                    const shouldLabel = player['Data Label?'] === 'Yes';
                                    const pos = getLabelPosition(player);
                                    
                                    const labelX = pos.fromLeft ? x - r + pos.offsetX : (pos.fromBottom || pos.fromTop ? x + pos.offsetX : x + r + pos.offsetX);
                                    const labelY = pos.fromTop ? y - r + pos.offsetY : (pos.fromBottom ? y + r + pos.offsetY : y + pos.offsetY);
                                    const lineX2 = pos.fromLeft ? x - r : (pos.fromBottom ? x : (pos.fromTop ? x : x + r));
                                    const lineY2 = pos.fromTop ? y - r : (pos.fromBottom ? y + r : y);

                                    const nameParts = player.Player.split(' ');
                                    const isMultiLine = !singleLineNames.includes(player.Player) && (nameParts.length === 2 || (nameParts.length === 3 && nameParts[2] === "Jr."));

                                    return (
                                        <g key={i}>
                                            <circle
                                                cx={x} cy={y} r={r}
                                                fill={isHovered ? "#2563eb" : "#3b82f6"}
                                                fillOpacity={isHovered ? 0.9 : 0.6}
                                                stroke={isHovered ? "#1e40af" : "#2563eb"}
                                                strokeWidth={isHovered ? 2 : 1}
                                                className="cursor-pointer"
                                                onMouseMove={(e) => handleMouseMove(e, player)}
                                                onMouseLeave={() => setHoveredPlayer(null)}
                                            />
                                            {shouldLabel && (
                                                <>
                                                    <line
                                                        x1={lineX2} y1={lineY2}
                                                        x2={pos.anchor === "end" ? labelX + 3 : labelX - 3}
                                                        y2={labelY}
                                                        stroke="#9ca3af" strokeWidth="1" opacity="0.5"
                                                    />
                                                    {isMultiLine ? (
                                                        <>
                                                            <text 
                                                                x={labelX} y={labelY - 5} textAnchor={pos.anchor} 
                                                                style={{fontSize: '11px', fontWeight: '600', fill: '#1f2937', textShadow: '0 0 4px white, 0 0 4px white, 0 0 4px white'}}
                                                            >
                                                                {nameParts[0]}
                                                            </text>
                                                            <text 
                                                                x={labelX} y={labelY + 7} textAnchor={pos.anchor} 
                                                                style={{fontSize: '11px', fontWeight: '600', fill: '#1f2937', textShadow: '0 0 4px white, 0 0 4px white, 0 0 4px white'}}
                                                            >
                                                                {nameParts.slice(1).join(' ')}{player.Player === "Shohei Ohtani" ? "*" : ""}
                                                            </text>
                                                        </>
                                                    ) : (
                                                        <text 
                                                            x={labelX} y={labelY} textAnchor={pos.anchor} 
                                                            style={{fontSize: '11px', fontWeight: '600', fill: '#1f2937', textShadow: '0 0 4px white, 0 0 4px white, 0 0 4px white'}}
                                                        >
                                                            {player.Player === "Shohei Ohtani" ? "Shohei Ohtani*" : player.Player}
                                                        </text>
                                                    )}
                                                </>
                                            )}
                                        </g>
                                    );
                                })}
                            </g>
                            </svg>

                                {hoveredPlayer && (
                                <div className="tooltip" style={{ left: mousePos.x + 15, top: mousePos.y - 10 }}>
                                    <div className="tooltip-name">{hoveredPlayer.Player}</div>
                                    <div>Total WAR: {hoveredPlayer.WAR.toFixed(1)}</div>
                                    <div>oWAR: {hoveredPlayer.oWAR.toFixed(1)}</div>
                                    <div>dWAR: {hoveredPlayer.dWAR.toFixed(1)}</div>
                                </div>
                            )}
                            
                            <div className="source">
                                Source: Baseball Reference
                            </div>
                            
                            <div className="footnote">
                                *Does not include pitching WAR
                            </div>
                        </div>
                        
                        <div className="mobile-hint">
                            ← Scroll horizontally to explore →
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<WARChart />, document.getElementById('root'));
    </script>
</body>
</html>
